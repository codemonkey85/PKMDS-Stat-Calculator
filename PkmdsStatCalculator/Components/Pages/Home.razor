@page "/"

<PageTitle>
    PKMDS Stat Calculator
</PageTitle>

<EditForm Model="@NewPokemonStats"
          OnValidSubmit="@OnValidSubmit">
    <DataAnnotationsValidator />

    <MudAutocomplete T="ComboItem"
                     Label="Species"
                     Variant="@Variant.Outlined"
                     @bind-Value:get="@(GetSpeciesComboItem((ushort)NewPokemonStats.Species))"
                     @bind-Value:set="@((species) => NewPokemonStats.Species = (Species)species.Value)"
                     SearchFunc="@((searchString) => Task.FromResult(SearchPokemonNames(searchString)))"
                     ToStringFunc="@((species) => species.Text)" />

    <MudButton Color="@Color.Primary"
               Variant="@Variant.Filled"
               StartIcon="@Icons.Material.Filled.Add"
               ButtonType="@ButtonType.Submit">
        Add
    </MudButton>
</EditForm>

<MudTable Items="@PokemonList">
    <HeaderContent>
        <MudTd>Species</MudTd>
        <MudTd>Nature</MudTd>
        <MudTd>Form</MudTd>
        <MudTd>Level</MudTd>
        <MudTd>HP</MudTd>
        <MudTd>Attack</MudTd>
        <MudTd>Defense</MudTd>
        <MudTd>Speed</MudTd>
        <MudTd>Special Attack</MudTd>
        <MudTd>Special Defense</MudTd>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@GetPokemonSpeciesName(context)</MudTd>
        <MudTd>@GetPokemonNatureName(context) @GetStatModifierString(context)</MudTd>
        <MudTd>@GetPokemonFormName(context)</MudTd>
        <MudTd>@context.CurrentLevel</MudTd>
        <MudTd>@context.Stats[Hp]</MudTd>
        <MudTd>@context.Stats[Atk]</MudTd>
        <MudTd>@context.Stats[Def]</MudTd>
        <MudTd>@context.Stats[Spe]</MudTd>
        <MudTd>@context.Stats[SpA]</MudTd>
        <MudTd>@context.Stats[SpD]</MudTd>
    </RowTemplate>
</MudTable>
